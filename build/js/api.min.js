!function(e){e("#new-quote-button").on("click",function(t){t.preventDefault();var o=api_vars.root_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1";e.ajax({method:"get",url:o}).done(function(t){var o=t.shift(),r=o._qod_quote_source_url,n=o._qod_source_url;e(".entry-title").html('<h2 class="entry-title">'+o.title.rendered+"</h2>"),e(".entry-content").html(o.content.rendered),r&&n?e(".source").html(', <a href="'+n+'">'+r+"</a>"):r?e(".source").html(', <a href="'+r+'">'):e(".source").text("");var u=api_vars.home_url+"/"+o[0].slug;history.pushState(null,null,u)}),e(window).on("popstate",function(){if(console.log("popstate fired!"),1===window.location.hash.indexOf("qm-overview "))return!1;window.location.replace("")})}),e(".submit-quote").on("click",function(t){t.preventDefault();var o=e("#quote-author").val(),r=e("#quote-content").val(),n=e("#quote-source").val(),u=e("#quote-source-url").val();e.ajax({method:"post",url:api_vars.root_url+"wp/v2/posts/",data:{title:o,content:r,_qod_quote_source:n,_qod_quote_source_url:u,status:"publish"},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.nonce)}}).done(function(){alert(api_vars.success),e("#quote-submission-form").trigger("reset")}).fail(function(){alert(api_vars.failure)})})}(jQuery);